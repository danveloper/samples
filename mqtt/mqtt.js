var p = Packages.org.fusesource.mqtt.client;
var mqtt = new p.MQTT();
mqtt.setHost('tcp://test.mosquitto.org:1883');
con = mqtt.blockingConnection();
con.connect();
con.subscribe([new p.Topic("presence", p.QoS.AT_LEAST_ONCE)]);
con.publish("presence", "Hello Nashorn!".getBytes(), p.QoS.AT_LEAST_ONCE, false);
var message = connection.receive();
print(new java.lang.String(message.getPayload()));
message.ack();
con.disconnect();
